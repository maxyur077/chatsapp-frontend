<div class="flex mb-2" [class.justify-end]="message.direction === 'outbound'">
  <div
    class="max-w-xs lg:max-w-md px-4 py-2 rounded-lg shadow-sm relative"
    [class.bg-ChatsApp-message]="message.direction === 'outbound'"
    [class.bg-white]="message.direction === 'inbound'"
    [class.rounded-br-none]="message.direction === 'outbound'"
    [class.rounded-bl-none]="message.direction === 'inbound'"
  >
    <!-- Sender name for inbound messages -->
    <div
      *ngIf="message.direction === 'inbound' && showSenderName"
      class="text-xs font-semibold text-ChatsApp-primary mb-1"
    >
      {{ message.contact_name || message.from }}
    </div>

    <!-- Message text -->
    <p class="text-sm text-gray-800 whitespace-pre-wrap break-words mb-1">
      {{ message.content.text }}
    </p>

    <!-- Message footer with time and status -->
    <div class="flex items-center justify-end mt-1 space-x-1">
      <span class="text-xs text-gray-500">
        {{ formatTime(message.timestamp) }}
      </span>

      <!-- Status icons for outbound messages -->
      <div *ngIf="message.direction === 'outbound'" class="flex items-center">
        <span class="text-xs font-medium ml-1" [class]="getStatusColor()">
          {{ getStatusIcon() }}
        </span>
      </div>
    </div>
  </div>
</div>
